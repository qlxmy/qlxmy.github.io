{"meta":{"title":"xmy's house","subtitle":"Build by xmy","description":"我见青山多妩媚，料青山见我应如是","author":"小蚂蚁的小窝","url":"http://yoursite.com","root":"/"},"pages":[{"title":"关于","date":"2020-01-10T07:43:48.000Z","updated":"2020-01-11T10:29:31.437Z","comments":true,"path":"about/index.html","permalink":"http://yoursite.com/about/index.html","excerpt":"","text":"继续折腾我的博客(^o^)/"},{"title":"categories","date":"2020-01-10T07:43:16.000Z","updated":"2020-01-10T07:43:16.000Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2020-01-10T07:42:50.000Z","updated":"2020-01-10T07:42:50.000Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":".htaccess绕过黑名单上传","slug":"htaccess绕过黑名单上传","date":"2020-01-11T10:35:58.000Z","updated":"2020-01-13T07:50:00.095Z","comments":true,"path":"2020/01/11/htaccess绕过黑名单上传/","link":"","permalink":"http://yoursite.com/2020/01/11/htaccess%E7%BB%95%E8%BF%87%E9%BB%91%E5%90%8D%E5%8D%95%E4%B8%8A%E4%BC%A0/","excerpt":".htaccess文件(或者”分布式配置文件”）,全称是Hypertext Access(超文本入口)。提供了针对目录改变配置的方法， 即，在一个特定的文档目录中放置一个包含一个或多个指令的文件， 以作用于此目录及其所有子目录。作为用户，所能使用的命令受到限制。管理员可以通过Apache的AllowOverride指令来设置。[1]在文件上传使用扩展名黑名单且没有过滤.htaccess的情况下，可以使用.htaccess文件绕过上传限制。 测试上传功能的代码如下： &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt; &lt;form action=&quot;&quot; enctype=&quot;multipart/form-data&quot; method=&quot;POST&quot;&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt; &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;upload&quot;&gt; &lt;/form&gt; &lt;?php $black_list = array(&#39;html&#39;, &#39;htm&#39;, &#39;php&#39;, &#39;php2&#39;, &#39;php3&#39;, &#39;php4&#39;, &#39;php5&#39;, &#39;phtml&#39;, &#39;txt&#39;); if(isset($_FILES[&#39;file&#39;])) { $file_name = $_FILES[&#39;file&#39;][&#39;name&#39;]; $file_path = &#39;images/&#39; . $file_name; $file_ext = substr($file_name, strrpos($file_name, &#39;.&#39;)+1); $file_tmp = $_FILES[&#39;file&#39;][&#39;tmp_name&#39;]; foreach($black_list as $key=&gt;$value) { if($value == strtolower($file_ext)) { echo &quot;不允许上传的文件类型！&quot;; exit(0); } } if(!move_uploaded_file($file_tmp, $file_path)) { echo &quot;文件上传失败！&quot;; } else { echo &quot;文件上传成功，文件路径为&quot; . $file_path; } } ?&gt;新建.htaccess文件内容如下： &lt;FilesMatch &quot;lala&quot;&gt; SetHandler application/x-httpd-php &lt;/FilesMatch&gt;上传该文件，由于文件扩展名不在黑名单中，所以可以上传成功：接着上传一个文件名包含“lala”且没有扩展名一句话木马文件：两个文件都能上传成功，使用菜刀连接lala文件：所以在使用黑名单过滤且未包含htaccess扩展名的情况下，.htaccess通常是个大杀器。 参考：[1]百度百科：https://baike.baidu.com/item/htaccess/1645473","text":".htaccess文件(或者”分布式配置文件”）,全称是Hypertext Access(超文本入口)。提供了针对目录改变配置的方法， 即，在一个特定的文档目录中放置一个包含一个或多个指令的文件， 以作用于此目录及其所有子目录。作为用户，所能使用的命令受到限制。管理员可以通过Apache的AllowOverride指令来设置。[1]在文件上传使用扩展名黑名单且没有过滤.htaccess的情况下，可以使用.htaccess文件绕过上传限制。 测试上传功能的代码如下： &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt; &lt;form action=&quot;&quot; enctype=&quot;multipart/form-data&quot; method=&quot;POST&quot;&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt; &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;upload&quot;&gt; &lt;/form&gt; &lt;?php $black_list = array(&#39;html&#39;, &#39;htm&#39;, &#39;php&#39;, &#39;php2&#39;, &#39;php3&#39;, &#39;php4&#39;, &#39;php5&#39;, &#39;phtml&#39;, &#39;txt&#39;); if(isset($_FILES[&#39;file&#39;])) { $file_name = $_FILES[&#39;file&#39;][&#39;name&#39;]; $file_path = &#39;images/&#39; . $file_name; $file_ext = substr($file_name, strrpos($file_name, &#39;.&#39;)+1); $file_tmp = $_FILES[&#39;file&#39;][&#39;tmp_name&#39;]; foreach($black_list as $key=&gt;$value) { if($value == strtolower($file_ext)) { echo &quot;不允许上传的文件类型！&quot;; exit(0); } } if(!move_uploaded_file($file_tmp, $file_path)) { echo &quot;文件上传失败！&quot;; } else { echo &quot;文件上传成功，文件路径为&quot; . $file_path; } } ?&gt;新建.htaccess文件内容如下： &lt;FilesMatch &quot;lala&quot;&gt; SetHandler application/x-httpd-php &lt;/FilesMatch&gt;上传该文件，由于文件扩展名不在黑名单中，所以可以上传成功：接着上传一个文件名包含“lala”且没有扩展名一句话木马文件：两个文件都能上传成功，使用菜刀连接lala文件：所以在使用黑名单过滤且未包含htaccess扩展名的情况下，.htaccess通常是个大杀器。 参考：[1]百度百科：https://baike.baidu.com/item/htaccess/1645473","categories":[{"name":"文件上传","slug":"文件上传","permalink":"http://yoursite.com/categories/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"}],"tags":[{"name":"文件上传","slug":"文件上传","permalink":"http://yoursite.com/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-01-11T07:54:24.958Z","updated":"2020-01-10T07:21:15.000Z","comments":true,"path":"2020/01/11/hello-world/","link":"","permalink":"http://yoursite.com/2020/01/11/hello-world/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new &quot;My New Post&quot; More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new &quot;My New Post&quot; More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}